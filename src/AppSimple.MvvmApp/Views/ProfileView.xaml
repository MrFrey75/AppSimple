<UserControl x:Class="AppSimple.MvvmApp.Views.ProfileView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <ScrollViewer VerticalScrollBarVisibility="Auto"
                  Background="{StaticResource BackgroundBrush}">
        <StackPanel MaxWidth="680" Margin="48,36,48,48"
                    HorizontalAlignment="Center">

            <TextBlock Text="My Profile"
                       Style="{StaticResource PageTitleStyle}"/>

            <!-- Status banner -->
            <Border Background="{StaticResource SuccessBrush}" CornerRadius="6"
                    Padding="14,10" Margin="0,0,0,16"
                    Visibility="{Binding HasSuccess, Converter={StaticResource BoolToVisibility}}">
                <TextBlock Text="{Binding SuccessMessage}"
                           Foreground="#1E1E2E" FontWeight="SemiBold"/>
            </Border>
            <Border Background="{StaticResource ErrorBrush}" CornerRadius="6"
                    Padding="14,10" Margin="0,0,0,16"
                    Visibility="{Binding HasError, Converter={StaticResource BoolToVisibility}}">
                <TextBlock Text="{Binding ErrorMessage}"
                           Foreground="#1E1E2E" FontWeight="SemiBold"/>
            </Border>

            <!-- Profile Info card -->
            <Border Style="{StaticResource CardStyle}" Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="Profile Information"
                               Style="{StaticResource SectionHeadingStyle}"/>

                    <!-- Read-only fields -->
                    <Grid Margin="0,12,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="160"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Username"      Style="{StaticResource FormLabelStyle}"/>
                        <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding Username}" Style="{StaticResource FormValueStyle}"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Email"         Style="{StaticResource FormLabelStyle}"/>
                        <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding Email}"    Style="{StaticResource FormValueStyle}"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Role"          Style="{StaticResource FormLabelStyle}"/>
                        <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding Role}"     Style="{StaticResource FormValueStyle}"/>

                        <TextBlock Grid.Row="3" Grid.Column="0" Text="Member Since"  Style="{StaticResource FormLabelStyle}"/>
                        <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding MemberSince}" Style="{StaticResource FormValueStyle}"/>

                        <!-- Editable fields -->
                        <TextBlock Grid.Row="4" Grid.Column="0" Text="First Name"    Style="{StaticResource FormLabelStyle}"/>
                        <TextBox   Grid.Row="4" Grid.Column="1"
                                   Text="{Binding FirstName, UpdateSourceTrigger=PropertyChanged}"
                                   Margin="0,4,0,4"/>

                        <TextBlock Grid.Row="5" Grid.Column="0" Text="Last Name"     Style="{StaticResource FormLabelStyle}"/>
                        <TextBox   Grid.Row="5" Grid.Column="1"
                                   Text="{Binding LastName, UpdateSourceTrigger=PropertyChanged}"
                                   Margin="0,4,0,4"/>

                        <TextBlock Grid.Row="6" Grid.Column="0" Text="Phone"         Style="{StaticResource FormLabelStyle}"/>
                        <TextBox   Grid.Row="6" Grid.Column="1"
                                   Text="{Binding PhoneNumber, UpdateSourceTrigger=PropertyChanged}"
                                   Margin="0,4,0,4"/>

                        <TextBlock Grid.Row="7" Grid.Column="0" Text="Date of Birth" Style="{StaticResource FormLabelStyle}"/>
                        <TextBox   Grid.Row="7" Grid.Column="1"
                                   Text="{Binding DobText, UpdateSourceTrigger=PropertyChanged}"
                                   Margin="0,4,0,4"
                                   ToolTip="Format: yyyy-MM-dd"/>
                    </Grid>

                    <!-- Bio -->
                    <TextBlock Text="Bio" Style="{StaticResource FormLabelStyle}" Margin="0,12,0,4"/>
                    <TextBox Text="{Binding Bio, UpdateSourceTrigger=PropertyChanged}"
                             Height="80" TextWrapping="Wrap"
                             AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>

                    <!-- Save button -->
                    <Button Content="Save Profile"
                            Command="{Binding SaveProfileCommand}"
                            Style="{StaticResource PrimaryButtonStyle}"
                            HorizontalAlignment="Left"
                            Margin="0,16,0,0"
                            IsEnabled="{Binding IsBusy, Converter={StaticResource InverseBoolToVisibility}}"/>
                </StackPanel>
            </Border>

            <!-- Change Password card -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel>
                    <TextBlock Text="Change Password"
                               Style="{StaticResource SectionHeadingStyle}"/>

                    <Grid Margin="0,12,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="160"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Current Password" Style="{StaticResource FormLabelStyle}"/>
                        <PasswordBox x:Name="CurrentPwd" Grid.Row="0" Grid.Column="1" Margin="0,4,0,4"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="New Password"     Style="{StaticResource FormLabelStyle}"/>
                        <PasswordBox x:Name="NewPwd" Grid.Row="1" Grid.Column="1" Margin="0,4,0,4"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Confirm Password" Style="{StaticResource FormLabelStyle}"/>
                        <PasswordBox x:Name="ConfirmPwd" Grid.Row="2" Grid.Column="1" Margin="0,4,0,4"/>
                    </Grid>

                    <Button Content="Change Password"
                            Style="{StaticResource PrimaryButtonStyle}"
                            HorizontalAlignment="Left"
                            Margin="0,16,0,0"
                            Click="ChangePasswordButton_Click"
                            IsEnabled="{Binding IsPasswordBusy, Converter={StaticResource InverseBoolToVisibility}}"/>
                </StackPanel>
            </Border>

        </StackPanel>
    </ScrollViewer>

</UserControl>
